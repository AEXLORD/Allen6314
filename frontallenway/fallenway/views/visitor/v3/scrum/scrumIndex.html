{% extends '../common/header.html' %}

        {% block subIncludeFileBeforeBody %}
    
        <style type = "text/css">
.box{
    width:25%;
    min-height:300px;
    float:left;
    padding:5px;
}
.border{
    border-top:solid 6px rgb(187, 221, 119);
    border-bottom:solid 6px rgb(187, 221, 119);
}
.itemBoxStyle {
    border:solid 1px #ddd;
    padding:5px;
    margin-top:10px;
    display:inline-block;
    margin-left:5px;
}
        </style>

        <script src = "/javascripts/myJs/item.js" ></script>
        <script src = "/javascripts/myJs/issue.js" ></script>
        {% endblock %}


{% block mainContent  %}

    <div  style = "width:100%;">
        <div style = "float:left">
            <a href = "javascript:void(0)" onclick = "showScrumProfile()">Scrum 介绍【点我】</a>
        </div>
        <div style = "float:right">
            {% if data.user == null %}
                <a href = "/visitor/user/login/to-login">登录</a> -
                <a href = "/visitor/user/register/to-register">注册</a>
            {% else %}
            <span>{{data.user.username}}</span> -
            <a href = "/visitor/user/logout?id={{data.user.id}}">退出</a>
            {% endif %}

        </div>
        <div style = "clear:both"></div>
    </div>

    <div id = "scrumProfile" style = "display:none;width:100%">
        <div>
        <ul>
            <li>Issue: 大的任务，例如 做运动，学习写一篇影评，学会某一项技术</li>
            <li>ICE BOX：分解后的任务，如，做运动，那么 ICE BOX 可以分为 做俯卧撑10个，深蹲20个 等</li>
            <li>IN PROGRESS：从 ICE BOX 中挑选出来的正在执行中的任务</li>
            <li>TESTING：如果是程序员，那么则需要测试；如果不是程序员，可以理解为反省，校验初步完成的任务是否ok</li>
            <li>COMPLETE：完成任务</li>
        </ul>
        </div>
        <div style = "width:100%;" class = "text-right">
            <a href = "javascript:void(0)" class = "btn btn-primary btn-sm" onclick = "hideScrumProfile()"
                style = "border-radius:0">收起</a>
        </div>
    </div>

    <div style = "margin-top:15px">
        <span style = "font-weight:bold">Issue: &nbsp;&nbsp;</span>
        <input type = "text"id = "issue" name = "issue" class = "form-control"
            placeholder = "name" style= "width:20%;display:inline-block"> &nbsp;&nbsp; 

        <select class = "form-control" name = "color" id = "color" style= "width:10%;display:inline-block">
            <option style = "background-color:rgb(199, 237, 204)" value = "rgb(199, 237, 204)">浅绿底色</option>
            <option style = "background-color:rgb(255, 153, 170)" value = "rgb(255, 153, 170)">浅红底色</option>
            <option style = "background-color:rgb(0, 204, 255)" value = "rgb(0, 204, 255)">浅蓝底色</option>
        </select>&nbsp;&nbsp; 

        <a class = "btn btn-primary btn-sm" style= "border-radius:0" href = "javascript:void(0)" 
            onclick = "addIssue('{{data.user.id}}')">新增</a>&nbsp;&nbsp;

        <span id = "addIssueError" style = "color:red"></span>
        
        <br/>

        <span style = "font-weight:bold">Item: &nbsp;&nbsp;&nbsp; </span>
        <input type = "text"id = "item" name = "item" class = "form-control"
            placeholder = "name" style= "width:20%;display:inline-block"> &nbsp;&nbsp;

        <select class = "form-control" name = "issueid" id = "issueid" style= "width:10%;display:inline-block">
            {% for issue in data.issues %}
            <option class = "{{issue.id}}"  value = "{{issue.id}}">{{issue.name}}</option>
            {% endfor %}
        </select>&nbsp;&nbsp; 
        
        <a class = "btn btn-primary btn-sm" style= "border-radius:0" href = "javascript:void(0)" 
            onclick = "addItem('{{data.user.id}}')">新增</a>&nbsp;&nbsp;

        <span id = "addItemError" style = "color:red"></span>

    </div>


    <div style ="margin-top:15px;">
    <div class = "text-center" style = "min-width:25%;float:left;">
        <span style = "font-weight:bold">ICE BOX</span>
    </div>
    <div class = "text-center" style = "min-width:25%;float:left">
        <span style = "font-weight:bold">IN PROGRESS</span>
    </div>
    <div class = "text-center" style = "min-width:25%;float:left">
        <span style = "font-weight:bold">TESTING</span>
    </div>
    <div class = "text-center" style = "min-width:25%;float:left">
        <span style = "font-weight:bold">COMPLETE</span>
    </div>
    </div>

    <div style = "clear:both"></div>

    <div>
    <div class = "border box" id = "icebox" 
        style = "border-left:solid 6px rgb(187, 221, 119);border-right:solid 3px rgb(187, 221, 119);">
        {% for item in data.items_icebox %}
            <div class = "itemBoxStyle" id = "{{item.id}}" style = "background-color:{{item.color}}">
                <a href = "javascript:void(0)" 
                    onclick = "showItemDetail('{{item.id}}','{{item.name}}','{{item.color}}','ICE BOX')">{{item.name}}</a>
            </div>
        {% endfor %}
    </div>
    <div class = "border box" id = "inprogress"
        style = "border-left:solid 3px rgb(187, 221, 119);border-right:solid 3px rgb(187, 221, 119);">
        {% for item in data.items_inprogress %}
            <div class = "itemBoxStyle" id = "{{item.id}}" style = "background-color:{{item.color}}">
                <a href = "javascript:void(0)" 
                    onclick = "showItemDetail('{{item.id}}','{{item.name}}','{{item.color}}','IN PROGRESS')">{{item.name}}</a>
            </div>
        {% endfor %}
    </div>
    <div class = "border box" id = "testing"
        style = "border-left:solid 3px rgb(187, 221, 119);border-right:solid 3px rgb(187, 221, 119);">
        {% for item in data.items_testing %}
            <div class = "itemBoxStyle" id = "{{item.id}}" style = "background-color:{{item.color}}">
                <a href = "javascript:void(0)" 
                    onclick = "showItemDetail('{{item.id}}','{{item.name}}','{{item.color}}','TESTING')">{{item.name}}</a>
            </div>
        {% endfor %}
    </div>
    <div class = "border box" id = "complete"
        style = "border-left:solid 3px rgb(187, 221, 119);border-right:solid 6px rgb(187, 221, 119);">
        {% for item in data.items_complete %}
            <div class = "itemBoxStyle" id = "{{item.id}}" style = "background-color:{{item.color}}">
                <a href = "javascript:void(0)" 
                    onclick = "showItemDetail('{{item.id}}','{{item.name}}','{{item.color}}','COMPLETE')">{{item.name}}</a>
            </div>
        {% endfor %}
    </div>
    </div>

    <div style = "clear:both"></div>

    <div id = "itemDetail" style = "margin-top:15px;">
    </div>
    &nbsp;&nbsp;
    <span id = "itemMoveError"></span>

    <div style = "margin-top:15px;">
        <span style = "font-weight:bold">Issue:</span>
        <div id = "issueShow">
            {% for issue in data.issues %}
            <div class = "{{issue.id}}" style = "height:45px;width:120px;border:solid 1px #ddd;padding:5px;display:inline-block">
            <div id = "issue1" style = "display">
                <a href = "javascript:void(0)" 
                    onclick = "showIssueDetail('{{issue.id}}','{{issue.name}}','{{issue.color}}')">{{issue.name}}</a>
            </div>
            <div class= "text-right" style = "width:100%">
                <div style = "height:12px;width:40px;background-color:{{issue.color}};display:inline-block">
                </div>
            </div>
        </div>
            {% endfor %}
        </div>
    </div>

    <div id = "issueDetail" style = "margin-top:15px;display:inline-block">
    </div>
    <span id = "issueDetailError" style = "color:red"></span>
    <hr/>


    <script type = "text/javascript">
var i = 0;
function showScrumProfile(){
    if(i == 0){
        $("#scrumProfile").css("display","inline-block");
        i = 1;
    } else {
        $("#scrumProfile").css("display","none");
        i = 0;
    }
}

function hideScrumProfile(){
    $("#scrumProfile").css("display","none");
}
    </script>
{% endblock %}
